{% extends 'base.html' %}
{% load static %}

{% block content %}
            <div class="p-6 grid grid-cols-1 lg:grid-cols-3 gap-6">

                <div class="col-span-2 space-y-6">
                  {% if request.GET.deleted == 'True' %}
<div class="bg-green-600 text-white p-4 rounded-md mb-4">
     deleted sucessfully !
 </div>
{% endif %}

{% if request.GET.error == 'True' %}
<div class="bg-red-100 text-red-800 p-4 rounded-md mb-4">
    {{request.GET.error}}
 </div>
{% endif %}

{% if messages %}
{% for message in messages %}
<div class="{% if message.tags %} {{ message.tags }} {% endif %} p-4 rounded-md mb-4 text-white">
  {{ message }}  
</div>

{% endfor %}

{% endif %}


<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5">
  <div class="stat-card bg-white shadow-md hover:shadow-xl transition-all rounded-xl p-5 overflow-hidden relative group">
                        <div class="flex items-center z-10 relative">
                            <div class="rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-3 mr-3 text-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Total Teams</p>
                                <div class="flex items-end">
                                    <h2 class="text-2xl font-bold text-gray-800">{{hackathon.hackathon_team.count}}</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card bg-white shadow-md hover:shadow-xl transition-all rounded-xl p-5 overflow-hidden relative group">
                        <div class="flex items-center z-10 relative">
                            <div class="rounded-xl bg-gradient-to-br from-indigo-500 to-indigo-600 p-3 mr-3 text-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Participants</p>
                                <div class="flex items-end">
                                    <h2 class="text-2xl font-bold text-gray-800">{{total_members}}</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card bg-white shadow-md hover:shadow-xl transition-all rounded-xl p-5 overflow-hidden relative group">
                        <div class="flex items-center z-10 relative">
                            <div class="rounded-xl bg-gradient-to-br from-amber-500 to-amber-600 p-3 mr-3 text-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Days</p>
                                <div class="flex items-end">
                                    <h2 class="text-2xl font-bold text-gray-800">{{duration}}</h2>
                  
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card bg-white shadow-md hover:shadow-xl transition-all rounded-xl p-5 overflow-hidden relative group">
                        <div class="flex items-center z-10 relative">
                            <div class="rounded-xl bg-gradient-to-br from-green-500 to-green-600 p-3 mr-3 text-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Submissions</p>
                                <div class="flex items-end">
                                    <h2 class="text-2xl font-bold text-gray-800">{{total_submissions}}</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                {% if hackathon.status == 'OPENED' %}
                <div class="bg-white shadow-md hover:shadow-xl transition-all rounded-xl p-6 mb-6">
                  <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    Start Hackathon
                  </h3>
                  <p class="text-gray-600 mb-4">
                    Start this hackathon and automatically reject waiting teams, and teams that do not reach the maximum/minimum team size.
                  </p>
                  <div class="flex justify-center">
                    <a
                    onclick="confirmStart(event, '{% url 'dashboard:dashboard_start_hackathon_view' hackathon.id %}')"
                    class="w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white font-semibold rounded-xl transition-colors shadow-md hover:shadow-lg">
                    <svg fill="#ffffff" class="h-6 w-6 mr-3" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M694.018 926.244c-27.296 18.796-27.3 49.269 0 68.067l509.836 351.074c27.296 18.797 49.424 7.18 49.424-25.959V601.13c0-33.133-22.125-44.757-49.424-25.959L694.018 926.244Z" fill-rule="evenodd"></path> </g></svg>
                    
                   Start Hackathon
                 </a>
                  </div>
                </div>
                {% endif %}
                
                {% if hackathon.hackathon_payment.amount == 2000 %}
                <div class="bg-white shadow-md hover:shadow-xl transition-all rounded-xl p-6 mb-6">
                  <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    AI Feature
                  </h3>
                    <p class="text-gray-600 mb-4">Access our AI-powered analytics page that provides insights on team performance, initial assessments, and predicts potential winners.</p>
                  <div class="flex justify-center">
                    <a href="{% url 'dashboard:dashboard_ai_feature_view' hackathon.id %}" class="w-full inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-medium rounded-lg transition-colors">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                      </svg>
                      View
                    </a>
                  </div>
                </div>

                {% endif %}
                  
                  <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      Hackathon Overview
                    </h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          
                      <div class="flex items-center">
                        <div class="rounded-full bg-blue-100 p-2 mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                          </svg>
                        </div>
                        <div>
                          <p class="text-sm text-gray-500">Title</p>
                          <p class="font-semibold">{{hackathon.title}}</p>
                        </div>
                      </div>
                      <div class="flex items-center">
                        <div class="rounded-full bg-blue-100 p-2 mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                          </svg>
                        </div>
                        <div>
                          <p class="text-sm text-gray-500">Dates</p>
                          <p class="font-semibold">{{hackathon.start_date}} - {{hackathon.end_date}}</p>
                        </div>
                      </div>
                      <div class="flex items-center">
                        <div class="rounded-full bg-blue-100 p-2 mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                          </svg>
                        </div>
                        <div>
                          <p class="text-sm text-gray-500">Location</p>
                          <p class="font-semibold">{{hackathon.location}}</p>
                        </div>
                      </div>
                      <div class="flex items-center">
                        <div class="rounded-full bg-blue-100 p-2 mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                        <div>
                          <p class="text-sm text-gray-500">Total Prizes</p>
                          <p class="font-semibold">{{total_prizes}} SAR</p>
                        </div>
                      </div>
                      <div class="flex items-center">
                        <div class="rounded-full bg-green-100 p-2 mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </div>
                        <div>
                          <p class="text-sm text-gray-500">Participants Range</p>
                          <p class="font-semibold">{{hackathon.min_team_size}}  - {{hackathon.max_team_size}} members</p>
                        </div>
                      </div>
          
                      <div class="flex items-center">
                        <div class="rounded-full bg-orange-100 p-2 mr-3">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                             <path opacity="0.4" d="M2.44922 14.9702C3.51922 18.4102 6.39923 21.0602 9.97923 21.7902"  stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M2.05078 10.98C2.56078 5.93 6.82078 2 12.0008 2C17.1808 2 21.4408 5.94 21.9508 10.98" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M14.0098 21.8C17.5798 21.07 20.4498 18.45 21.5398 15.02" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path> 
                      </svg>
                        </div>
                        <div>
                          <p class="text-sm text-gray-500">Current Status</p>
                          <p class="font-semibold">{{hackathon.status}}</p>
                        </div>
                      </div>
            
  
            
                    </div>
                    <br>
                    <div class="flex items-center">
                      <div class="rounded-full bg-blue-100 p-2 mr-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                           <path fill-rule="evenodd" clip-rule="evenodd" d="M16.3939 2.02121L16.4604 2.03904C17.5598 2.33361 18.431 2.56704 19.1162 2.81458C19.8172 3.06779 20.3888 3.35744 20.8597 3.79847C21.5453 4.44068 22.0252 5.27179 22.2385 6.18671C22.385 6.81503 22.3501 7.45486 22.2189 8.18849C22.0906 8.90573 21.8572 9.77697 21.5626 10.8764L21.0271 12.8747C20.7326 13.974 20.4991 14.8452 20.2516 15.5305C19.9984 16.2314 19.7087 16.803 19.2677 17.2739C18.6459 17.9377 17.8471 18.4087 16.9665 18.6316C16.7093 19.2213 16.3336 19.7554 15.8597 20.1993C15.3888 20.6403 14.8172 20.9299 14.1162 21.1832C13.431 21.4307 12.5598 21.6641 11.4605 21.9587L11.394 21.9765C10.2946 22.2711 9.42337 22.5045 8.70613 22.6328C7.9725 22.764 7.33266 22.7989 6.70435 22.6524C5.78943 22.4391 4.95832 21.9592 4.31611 21.2736C3.87508 20.8027 3.58542 20.2311 3.33222 19.5302C3.08468 18.8449 2.85124 17.9737 2.55667 16.8743L2.02122 14.876C1.72664 13.7766 1.4932 12.9054 1.36495 12.1882C1.23376 11.4546 1.19881 10.8147 1.34531 10.1864C1.55864 9.27149 2.03849 8.44038 2.72417 7.79817C3.19505 7.35714 3.76664 7.06749 4.46758 6.81428C5.15283 6.56674 6.02404 6.3333 7.12341 6.03873L7.15665 6.02983C7.42112 5.95896 7.67134 5.89203 7.90825 5.82944C8.29986 4.43031 8.64448 3.44126 9.31611 2.72417C9.95831 2.03849 10.7894 1.55864 11.7043 1.34531C12.3327 1.19881 12.9725 1.23376 13.7061 1.36495C14.4233 1.49319 15.2945 1.72664 16.3939 2.02121ZM7.45502 7.5028C6.36214 7.79571 5.57905 8.00764 4.9772 8.22505C4.36778 8.4452 4.00995 8.64907 3.74955 8.89296C3.2804 9.33237 2.95209 9.90103 2.80613 10.527C2.72511 10.8745 2.72747 11.2863 2.84152 11.9242C2.95723 12.5712 3.17355 13.381 3.47902 14.521L3.99666 16.4529C4.30212 17.5929 4.51967 18.4023 4.74299 19.0205C4.96314 19.63 5.16701 19.9878 5.4109 20.2482C5.85031 20.7173 6.41897 21.0456 7.04496 21.1916C7.39242 21.2726 7.80425 21.2703 8.4421 21.1562C9.08915 21.0405 9.89893 20.8242 11.0389 20.5187C12.1789 20.2132 12.9884 19.9957 13.6066 19.7724C14.216 19.5522 14.5739 19.3484 14.8343 19.1045C14.9719 18.9756 15.0973 18.8357 15.2096 18.6865C15.0306 18.6612 14.8463 18.629 14.6557 18.5911C13.9839 18.4575 13.1769 18.2413 12.1808 17.9744L12.1234 17.959C11.024 17.6644 10.1528 17.431 9.46758 17.1835C8.76664 16.9302 8.19505 16.6406 7.72416 16.1996C7.03849 15.5574 6.55864 14.7262 6.34531 13.8113C6.19881 13.183 6.23376 12.5432 6.36494 11.8095C6.4932 11.0923 6.72664 10.2211 7.02122 9.12174L7.45502 7.5028ZM13.4421 2.84152C12.8042 2.72747 12.3924 2.72511 12.045 2.80613C11.419 2.95209 10.8503 3.2804 10.4109 3.74955C9.97479 4.21518 9.70642 4.93452 9.2397 6.64323C9.16384 6.92093 9.08365 7.22023 8.99665 7.54488L8.47902 9.47673C8.17355 10.6167 7.95723 11.4265 7.84152 12.0736C7.72747 12.7114 7.72511 13.1232 7.80613 13.4707C7.95209 14.0967 8.2804 14.6654 8.74955 15.1048C9.00995 15.3487 9.36778 15.5525 9.9772 15.7727C10.5954 15.996 11.4049 16.2136 12.5449 16.519C13.5703 16.7938 14.3303 16.997 14.9482 17.1199C15.5635 17.2422 15.981 17.2723 16.3232 17.23C16.3976 17.2209 16.4691 17.2082 16.5389 17.1919C17.1649 17.0459 17.7335 16.7176 18.1729 16.2485C18.4168 15.9881 18.6207 15.6303 18.8408 15.0208C19.0642 14.4026 19.2817 13.5932 19.5872 12.4532L20.1048 10.5213C20.4103 9.38129 20.6266 8.57151 20.7423 7.92446C20.8564 7.28661 20.8587 6.87479 20.7777 6.52733C20.6317 5.90133 20.3034 5.33267 19.8343 4.89327C19.5739 4.64937 19.216 4.4455 18.6066 4.22535C17.9884 4.00203 17.1789 3.78448 16.0389 3.47902C14.8989 3.17355 14.0892 2.95723 13.4421 2.84152ZM11.0524 9.80588C11.1596 9.40578 11.5709 9.16834 11.971 9.27555L16.8006 10.5696C17.2007 10.6768 17.4381 11.0881 17.3309 11.4882C17.2237 11.8883 16.8125 12.1257 16.4124 12.0185L11.5827 10.7244C11.1826 10.6172 10.9452 10.206 11.0524 9.80588ZM10.2755 12.7036C10.3828 12.3035 10.794 12.066 11.1941 12.1733L14.0919 12.9497C14.492 13.0569 14.7294 13.4682 14.6222 13.8683C14.515 14.2684 14.1038 14.5058 13.7037 14.3986L10.8059 13.6221C10.4058 13.5149 10.1683 13.1037 10.2755 12.7036Z" fill="#1C274C"></path>
                        </svg>
                        
                      </div>
                      <div>
                        <p class="text-sm text-gray-500">Description</p>
                        <p class="font-semibold">{{hackathon.description}}</p>
                      </div>
                    </div>
                  </div>
                  
                  
                
                <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            Stages Timeline
                        </h3>
                    </div>
                    <div class="relative">
                      <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gradient-to-b from-blue-500 via-blue-400 to-gray-200"></div>
                      <ul class="space-y-4 ml-0">
                          {% for stage in hackathon.hackathon_stage.all %}
                              {% if stage.id < hackathon.current_stage.id %}
                                  <li class="p-4 pl-12 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg flex justify-between items-center border-l-4 border-green-500 shadow-sm hover:shadow transition-all relative">
                                      <div class="absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-green-500 border-2 border-white z-10 flex items-center justify-center">
                                          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                          </svg>
                                      </div>
                                      <div>
                                          <div class="font-semibold text-gray-800">{{ stage.title }}</div>
                                          <div class="text-xs text-gray-500 mt-1">{{ stage.start_date|date:"M d" }} - {{ stage.end_date|date:"M d" }}</div>
                                      </div>
                                      <div class="flex items-center">
                                          <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full mr-2">Completed</span>
                                      </div>
                                  </li>
                              {% elif stage.id == hackathon.current_stage.id %}
                                  <li class="p-4 pl-12 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg flex justify-between items-center border-l-4 border-blue-500 shadow-sm hover:shadow transition-all relative animate-pulse">
                                      <div class="absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-blue-500 border-2 border-white z-10 flex items-center justify-center">
                                          <div class="w-2 h-2 bg-white rounded-full"></div>
                                      </div>
                                      <div>
                                          <div class="font-semibold text-gray-800">{{ stage.title }}</div>
                                          <div class="text-xs text-gray-500 mt-1">{{ stage.start_date|date:"M d" }} - {{ stage.end_date|date:"M d" }}</div>
                                      </div>
                                      <div class="flex items-center">
                                          <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mr-2">Active</span>
                                      </div>
                                  </li>
                              {% else %}
                                  <li class="p-4 pl-12 bg-white rounded-lg flex justify-between items-center border border-gray-200 shadow-sm hover:shadow transition-all relative opacity-75">
                                      <div class="absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-gray-300 border-2 border-white z-10"></div>
                                      <div>
                                          <div class="font-semibold text-gray-600">{{ stage.title }}</div>
                                          <div class="text-xs text-gray-500 mt-1">{{ stage.start_date|date:"M d" }} - {{ stage.end_date|date:"M d" }}</div>
                                      </div>
                                      <div class="flex items-center">
                                          <span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full mr-2">Upcoming</span>
                                      </div>
                                  </li>
                              {% endif %}
                          {% endfor %}
                      </ul>
                  </div>
                  
                   
                </div>
                  
                <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                            </svg>
                            Teams
                        </h3>
                    </div>
                    <div class="space-y-4">
                      {% for team in teams %}
                        <div class="p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow">
                          <div class="flex justify-between">
                            <div>
                              <h4 class="font-bold text-blue-800">{{team.name}}</h4>
                              <p class="text-sm text-gray-600">Leader: {{team.leader.first_name}} - {{team.leader.email}} </p>
                            </div>

                            <div class="flex flex-col sm:flex-row sm:space-x-2 space-y-2 sm:space-y-0">
                              <span
                              class="px-2.5 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full flex items-center"
                              >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-3.5 w-3.5 mr-1"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                              >
                                <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
                                />
                              </svg>
                              {% with member_count=team.team_members.count %}
    {{ member_count|add:1 }}
{% endwith %} members
                              </span>
                              <span class="px-2.5 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full flex items-center">
                              {{team.track.name}}
                              </span>
                            </div>

                            </div>
                          <div class="mt-3 flex justify-between items-center">
                            <div class="text-sm text-gray-500">{{team.team_submission.count}} Submissions</div>
                            <a href="{% url 'dashboard:dashboard_team_details_view' team.id %}" class="text-blue-600 hover:text-blue-800 text-sm font-medium">View Details →</a>
                          </div>
                        </div>
                
                        {% endfor %}
                        
                        <div class="text-center mt-6">
                            <a href="{% url 'dashboard:dashboard_teams_view' hackathon.id %}" class="inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                                View All Teams
                            </a>
                        </div>
                    </div>
                  </svg>
                </div>
                </div>
                  
                <div class="space-y-6">
                  
                  <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                      </svg>
                       Actions
                    </h3>
                    <div class="space-y-3">
                      <button onclick="openModal('updateStageModal')" class="w-full bg-gradient-to-r from-green-500 to-green-400 hover:from-green-600 hover:to-green-500 text-white p-3 rounded-lg transition-colors flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                      </svg>
                       Update Hackathon Stage
                      </button>
                      
                
                      
                      <button onclick="openModal('updateStatusModal')"
                              class="w-full p-3 rounded-lg flex items-center justify-center transition-colors bg-gradient-to-r from-slate-500 to-slate-800 text-white">
                      
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                          </svg>
                      
                          Update Hackathon Status
                      </button>
                      
                      <button onclick="openAttendanceModal('attendanceModal')" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white p-3 rounded-lg transition-colors flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                        Assign Attendance
                      </button>
                      <button id="endHackathonBtn" class="w-full bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white p-3 rounded-lg transition-colors flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        End Hackathon & Select Winners
                      </button>
                    </div>
                  </div>
                  
            
            
                  <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <div class="flex justify-between items-center mb-4">
                      <h3 class="text-lg font-semibold flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                        </svg>
                        Tracks
                      </h3>
                      <button onclick="openModal('addTrackModal')" class="bg-blue-600 p-2 rounded-xl text-white text-sm"> <i class="fa fa-plus"></i> Add</button>
                    </div>
                    <ul class="space-y-3">
                      {% for track in tracks %}
                      <li class="p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg flex justify-between items-center border border-blue-100">
                        <div class="flex items-center">
                          <div>
                            <p class="font-medium">{{track.name}}</p>
                            <p class="text-sm text-gray-500">{{track.accepted_teams_count}} teams</p>
                          </div>
                          
                        </div>
                       <div class="flex items-center">
                        <button onclick="confirmDelete(event, '{% url 'dashboard:dashboard_delete_hackathon_track_view' track.id %}')" class="text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                          </svg>
                        </button>
                        <a href="{% url 'dashboard:dashboard_track_teams_view' hackathon.id track.id %}" class="text-blue-600 hover:text-blue-800 text-sm font-medium">View →</a>
                      </div>

                      </li>
                      {% endfor %}
     
                      
                    </ul>
                  </div>

                  <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                      <h3 class="text-lg font-semibold flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Prizes
                      </h3>
         
                    </div>
                    <div class="space-y-4">
                      {% for prize in prizes %}
                      <div class="flex items-center p-5 rounded-xl shadow-sm hover:shadow-md transition-all
                          {% if forloop.first %} bg-gradient-to-r from-amber-50 to-yellow-50 
                          {% elif forloop.counter == 2 %} bg-gradient-to-r from-slate-50 to-gray-50 
                          {% elif forloop.counter == 3 %} bg-gradient-to-r from-orange-50 to-amber-50 
                          {% endif %}">
                          
                          <div class="w-12 h-12 rounded-full flex items-center justify-center shadow-md mr-4
                              {% if forloop.first %} bg-gradient-to-br from-amber-500 to-yellow-500
                              {% elif forloop.counter == 2 %} bg-gradient-to-br from-slate-400 to-gray-500
                              {% elif forloop.counter == 3 %} bg-gradient-to-br from-orange-500 to-amber-600
                              {% endif %}">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                              </svg>
                          </div>
                    
                          <div class="flex flex-col">
                              <div class="font-bold text-gray-800 text-lg">{{ prize.title }} Place - {{ prize.amount }} SAR</div>
                              
                              {% if hackathon.status == 'FINISHED' and prize.team %}
                              <p class="text-sm text-gray-600 mt-1">Winner: {{ prize.team.name }}</p>
                              <a href="{% url 'dashboard:dashboard_team_details_view' prize.team.id %}" class="text-blue-600 hover:underline text-sm mt-1">View Details</a>
                            {% endif %}
                          </div>
                      </div>
                    {% endfor %}
                    
                  </div>
                  </div>
                  <div class="bg-white shadow-md hover:shadow-lg transition-all rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                      <h3 class="text-lg font-semibold flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                        Requirements
                      </h3>
                      <button onclick="openModal('addRequirementModal')" class="bg-blue-600 p-2 rounded-xl text-white text-sm"> <i class="fa fa-plus"></i> Add </button>

                    </div>
                    <ul class="space-y-3">
                      
                      {% for requirement in hackathon.hackathon_requirement.all %}
                      <li class="p-3 bg-blue-50 rounded-lg flex justify-between items-center border border-blue-100">
                        <div class="flex items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                          </svg>
                          {{requirement.description}}
                        </div>
                        <button onclick="confirmDelete(event, '{% url 'dashboard:dashboard_delete_hackathon_requirement_view' requirement.id %}')" class="text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-50">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                          </svg>
                        </button>
                      </li>
                      {% endfor %}
                    </ul>
                  </div>
                  

                </div>
              </div>
              
              <div id="addTrackModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center backdrop-blur-sm overflow-y-auto">
                <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-3xl transform transition-all my-8 mx-4 max-h-[90vh] flex flex-col">
                          <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Add Track</h2>
                        <button onclick="closeModal('addTrackModal')" class="text-gray-400 hover:text-gray-600">
                            ✕
                        </button>
                    </div>
              
                    <form method="POST" action="{% url 'dashboard:dashboard_add_track_view' hackathon.id %}" class="flex flex-col space-y-4">
                        {% csrf_token %}
                        
                        <label class="block text-sm font-medium text-gray-700 mb-1">Track Name</label>
                        <input type="text" name="track_name" required class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" placeholder="track name">

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Track Description</label>
                            <textarea name="track_description" rows="3" required class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" placeholder="Describe this track, its focus areas, and what participants should aim to create..."></textarea>
                        </div>
               
              
                        <div class="mt-6 flex justify-end space-x-3">
                            <button type="button" onclick="closeModal('addTrackModal')" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors">Cancel</button>
                            <button type="submit" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition-colors">Add Track</button>
                        </div>
              
                    </form>
                </div>
              </div>
                        
              <div id="addRequirementModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center backdrop-blur-sm overflow-y-auto">
                <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-3xl transform transition-all my-8 mx-4 max-h-[90vh] flex flex-col">
                          <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Add Requirement</h2>
                        <button onclick="closeModal('addRequirementModal')" class="text-gray-400 hover:text-gray-600">
                            ✕
                        </button>
                    </div>
              
                    <form method="POST" action="{% url 'dashboard:dashboard_add_requirement_view' hackathon.id %}" class="flex flex-col space-y-4">
                        {% csrf_token %}
                        
                        <label class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                        <input type="text" name="requirement" required class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" placeholder="Enter Requirement">

                   
                        <div class="mt-6 flex justify-end space-x-3">
                            <button type="button" onclick="closeModal('addRequirementModal')" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors">Cancel</button>
                            <button type="submit" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition-colors">Add Requirement</button>
                        </div>
              
                    </form>
                </div>
              </div>
              
<div id="updateStageModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center backdrop-blur-sm overflow-y-auto">
  <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-3xl transform transition-all my-8 mx-4 max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800">Update Hackathon Stage</h2>
          <button onclick="closeModal('updateStageModal')" class="text-gray-400 hover:text-gray-600">
              ✕
          </button>
      </div>

      <form method="POST" action="{% url 'dashboard:dashboard_update_hackathon_stage' hackathon.id %}" class="flex flex-col space-y-4">
          {% csrf_token %}
          
          {% if hackathon.current_stage %}
          <div class="mt-4 p-3 bg-blue-50 rounded-lg">
              <p class="font-semibold text-gray-800">Running Stage:</p>
              <p class="text-gray-600">{{ hackathon.current_stage.title }} ({{ hackathon.current_stage.start_date }} - {{ hackathon.current_stage.end_date }})</p>
          </div>
          {% endif %}
          <label class="font-medium text-gray-700">Select a new Stage:</label>
          <select name="current_stage" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
           <option value="" disabled>Select stage</option>
            {% for stage in hackathon.hackathon_stage.all %}
                  <option value="{{ stage.id }}" {% if hackathon.current_stage and hackathon.current_stage.id == stage.id %}selected{% endif %}>
                      {{ stage.title }}
                  </option>
              {% endfor %}
          </select>

    

          <div class="mt-6 flex justify-end space-x-3">
              <button type="button" onclick="closeModal('updateStageModal')" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors">Cancel</button>
              <button type="submit" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition-colors">Update Stage</button>
          </div>

      </form>
  </div>
</div>

<div id="updateStatusModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center backdrop-blur-sm overflow-y-auto">
  <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-3xl transform transition-all my-8 mx-4 max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800">Update Hackathon Status</h2>
          <button onclick="closeModal('updateStatusModal')" class="text-gray-400 hover:text-gray-600">
              ✕
          </button>
      </div>

      <form method="POST" action="{% url 'dashboard:dashboard_update_hackathon_status' hackathon.id %}" class="flex flex-col space-y-4">
          {% csrf_token %}
          
          {% if hackathon.current_stage %}
          <div class="mt-4 p-3 bg-blue-50 rounded-lg">
              <p class="font-semibold text-gray-800">Running Status:</p>
              <p class="text-gray-600">{{ hackathon.status }}</p>
          </div>
          {% endif %}
          <label class="font-medium text-gray-700">Select a new Status:</label>
          <select name="current_stage" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
           <option value="" disabled selected>Select Status</option>
           <option value="OPENED">Opened</option>
           <option value="CLOSED">Closed</option>
           <option value="ONGOING">Ongoing</option>
           <option value="FINISHED">Finished</option>
      
          </select>

    

          <div class="mt-6 flex justify-end space-x-3">
              <button type="button" onclick="closeModal('updateStatusModal')" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors">Cancel</button>
              <button type="submit" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition-colors">Update Status</button>
          </div>

      </form>
  </div>
</div>
<div id="endHackathonModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center backdrop-blur-sm p-4">
  <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-xl sm:max-w-2xl md:max-w-3xl max-h-[90vh] overflow-y-auto flex flex-col">
          <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">End Hackathon & Select Winners</h2>
                    <button onclick="closeEndHackathonModal()" class="text-gray-500 hover:text-gray-700 focus:outline-none">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </div>
                  
                  <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                    <div class="flex">
                      <div class="flex-shrink-0">
                        <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                      </div>
                      <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                          <strong>Warning:</strong> This action will close the hackathon. You won't be able to make changes after that.
                        </p>
                      </div>
                    </div>
                  </div>

                  <form action="{% url 'dashboard:dashboard_sign_winners_view' hackathon.id %}" method="post">
                    {% csrf_token %}
                  <div class="space-y-6 overflow-y-auto flex-1 pr-2">
                    <h3 class="text-lg font-medium text-gray-700">Select Winners for Each Prize</h3>
                   
                    {% for prize in prizes %}
                    <div class="rounded-lg border border-gray-200 p-4 mb-4">
                      <div class="flex items-center mb-3">
                      <h4 class="text-lg font-semibold text-gray-800">{{ prize.title}} Place - {{ prize.amount }} SAR</h4>
                      </div>
                      <div>
                      <label for="{{prize.id}}_winner" class="block text-sm font-medium text-gray-700 mb-1">Select Team</label>
                      <select required name="{{prize.id}}_winner"
                       class="w-full p-2 bg-white border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent ">
                        <option value="">-- Select winner --</option>

                        {% for team in hackathon.hackathon_team.all %}
                        <option value="{{team.id}}">{{team.name}} ({{team.leader.first_name}})</option>
                {% endfor %}
                      </select>
                      </div>
                    </div>
                    {% endfor %}
                
                  </div>
                  
                  <div class="flex justify-end space-x-4 pt-4 border-t border-gray-200 mt-4">
                    <button onclick="closeEndHackathonModal()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors">
                      Cancel
                    </button>
                    <button id="finalizeHackathonBtn" onclick="finalizeHackathon()" class="px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg transition-colors">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      Finalize & End Hackathon
                    </button>
                  </div>
                </form>

                </div>
              </div>
            
              <script>
                function openModal(id) {
                    document.getElementById(id).classList.remove('hidden');
                }
                
                function closeModal(id) {
                    document.getElementById(id).classList.add('hidden');
                }
                </script>
            
            <script>
                
          
                document.getElementById('endHackathonBtn').addEventListener('click', openEndHackathonModal);
                
                function openEndHackathonModal() {
                  const modal = document.getElementById('endHackathonModal');
                  modal.classList.remove('hidden');

                }
                
                function closeEndHackathonModal() {
                  document.getElementById('endHackathonModal').classList.add('hidden');
                  document.getElementById('winnersSummary').classList.add('hidden');
                  document.getElementById('finalizeHackathonBtn').classList.add('hidden');
                  document.getElementById('previewWinnersBtn').classList.remove('hidden');
                  
      
                }
                
              
              </script>
    
    <div id="attendanceModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center backdrop-blur-sm p-4">
      <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-xl sm:max-w-2xl md:max-w-3xl max-h-[90vh] overflow-y-auto flex flex-col">
       
        <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold text-gray-800">Select Date for Attendance</h2>
      <button onclick="closeModal('attendanceModal')" class="text-gray-400 hover:text-gray-600">
          ✕
      </button>
  </div>        
        
        <form method="get"  action="{% url 'dashboard:dashboard_attendence_hackathon_view' hackathon.id %}"  class="space-y-6">
          
          <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
            {% for d in dates %}
            <label class="flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-all hover:bg-blue-50 peer-checked:border-blue-500">
              <input type="radio" name="date" value="{{ d|date:'Y-m-d' }}" class="hidden peer" required>
              <span class="text-sm font-medium text-gray-700 peer-checked:text-blue-600">
                {{ d|date:"M d, Y" }}
              </span>
            </label>
            {% endfor %}
          </div>
          
          <div class="flex justify-end">
            <button type="submit" 
              class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
              Open Attendance Page
            </button>
          </div>
        </form>
        
      </div>
    </div>
    
              <script>
        
        
                
                
                function openAttendanceModal() {
                  document.getElementById('attendanceModal').classList.remove('hidden');
                }
                
                function closeAttendanceModal() {
                  document.getElementById('attendanceModal').classList.add('hidden');
                }
                
         
      
             
              </script>

    <script>
      function confirmDelete(event, url) {
          event.preventDefault();
          Swal.fire({
              title: 'Are you sure?',
              text: "You cannot return this !.",
              icon: 'warning',
              showCancelButton: true,
              confirmButtonColor: '#d33',
              cancelButtonColor: '#3085d6',
              confirmButtonText: 'Confirm',
              cancelButtonText: 'Cancel'
          }).then((result) => {
              if (result.isConfirmed) {
                  window.location.href = url;
              }
          });
      }
  </script>
      <script>
        function confirmStart(event, url) {
            event.preventDefault();
            Swal.fire({
                title: 'Are you sure?',
                text: "make sure a registeration for hackathon will be closed.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: 'green',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Confirm',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = url;
                }
            });
        }
    </script>
{% endblock %}